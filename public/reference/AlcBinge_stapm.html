<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Calculate variables to inform alcohol binge model - STAPM version  — AlcBinge_stapm • tobalcepi</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Calculate variables to inform alcohol binge model - STAPM version  — AlcBinge_stapm" />
<meta property="og:description" content="Designed to work with simulated individual trajectories of alcohol consumption - stratified by 
age category, sex and IMD quintile. Assigns coefficients stratified by age category, sex and IMD quintile to 
the simulated sample of individuals to estimate their characteristics of single occassion drinking 
at each time step in the simulation." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">tobalcepi</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.3.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/tobalcepi.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../articles/index.html">Articles</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Calculate variables to inform alcohol binge model - STAPM version <a href='https://www.tidyverse.org/lifecycle/#maturing'><img src='figures/lifecycle-maturing.svg' alt='Maturing lifecycle'></a></h1>
    
    <div class="hidden name"><code>AlcBinge_stapm.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Designed to work with simulated individual trajectories of alcohol consumption - stratified by 
age category, sex and IMD quintile. Assigns coefficients stratified by age category, sex and IMD quintile to 
the simulated sample of individuals to estimate their characteristics of single occassion drinking 
at each time step in the simulation.</p>
    </div>

    <pre class="usage"><span class='fu'>AlcBinge_stapm</span><span class='op'>(</span><span class='va'>data</span>, params <span class='op'>=</span> <span class='fu'>tobalcepi</span><span class='fu'>::</span><span class='va'><a href='binge_params_stapm.html'>binge_params_stapm</a></span><span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>data</th>
      <td><p>Data table of individual characteristics - the variables used are average weekly alcohol consumption, 
age, sex and IMD quintile.</p></td>
    </tr>
    <tr>
      <th>params</th>
      <td><p>List of four data tables - three containing coefficient estimates from Hill-McManus et al 
averaged by age category, sex and IMD quintile, and the fourth containing estimates of individual height and weight 
averaged by age category, sex and IMD quintile.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>Returns data plus the estimated variables.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>The coefficients used come originally from a study by Hill-McManus 2014,
who analysed drinking occasions using data from detailed diaries in the National Diet and Nutrition Survey 2000/2001.
Using the results, it possible to model each individual's expected number of drinking occasions across the year,
the average amount they drunk on an occasion, the variability in the amount drunk among occasions,
and how these vary socio-demographically.</p>
<p>To get these coefficients into a form in which they fit with the age, sex and IMD quintile 
stratification of the STAPM model required assigning them to a sample of Health Survey for England data (2011-2017) 
based on a full range of covariates, and then calculating weighted averages by age category, sex and IMD quintile.</p>
<p>This function is designed to be applied at each time step during a STAPM model run.</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'>
<span class='kw'>if</span> <span class='op'>(</span><span class='cn'>FALSE</span><span class='op'>)</span> <span class='op'>{</span>

<span class='co'># Simulate individual data</span>

<span class='co'># Using the parameters for the Gamma distribution from Kehoe et al. 2012</span>
<span class='va'>n</span> <span class='op'>&lt;-</span> <span class='fl'>1e3</span>
<span class='va'>grams_ethanol_day</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/GammaDist.html'>rgamma</a></span><span class='op'>(</span><span class='va'>n</span>, shape <span class='op'>=</span> <span class='fl'>0.69</span>, scale <span class='op'>=</span> <span class='fl'>19.03</span><span class='op'>)</span>

<span class='va'>data</span> <span class='op'>&lt;-</span> <span class='fu'>data.table</span><span class='op'>(</span>
  weekmean <span class='op'>=</span> <span class='va'>grams_ethanol_day</span> <span class='op'>*</span> <span class='fl'>7</span> <span class='op'>/</span> <span class='fl'>8</span>,
  age <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/stats/Poisson.html'>rpois</a></span><span class='op'>(</span><span class='va'>n</span>, <span class='fl'>30</span><span class='op'>)</span>,
  sex <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/sample.html'>sample</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"Male"</span>, <span class='st'>"Female"</span><span class='op'>)</span>, size <span class='op'>=</span> <span class='va'>n</span>, replace <span class='op'>=</span> <span class='cn'>T</span><span class='op'>)</span>,
  imd_quintile <span class='op'>=</span> <span class='st'>"5_most_deprived"</span>
<span class='op'>)</span>

<span class='va'>test_data</span> <span class='op'>&lt;-</span> <span class='fu'>AlcBinge_stapm</span><span class='op'>(</span><span class='va'>data</span><span class='op'>)</span>
<span class='op'>}</span>

</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by <a href='https://www.sheffield.ac.uk/scharr/sections/heds/staff/gillespie_d'>Duncan Gillespie</a>, Laura Webster, <a href='https://www.sheffield.ac.uk/scharr/sections/heds/staff/henney_m'>Maddy Henney</a>, <a href='https://www.sheffield.ac.uk/scharr/sections/heds/staff/angus_c'>Colin Angus</a>, <a href='https://www.sheffield.ac.uk/scharr/sections/heds/staff/brennan_a'>Alan Brennan</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


