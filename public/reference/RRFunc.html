<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Individual relative risks of disease — RRFunc • tobalcepi</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Individual relative risks of disease — RRFunc" />
<meta property="og:description" content="This function takes a sample of individuals and computes each individual's relative risk
for each disease according to their current tobacco and alcohol consumption. 
There is an option to tailor this
to the alcohol only, tobacco only, or joint tobacco and alcohol contexts." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">tobalcepi</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.3.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/alc_partially_attrib_acute.html">Risk of acute conditions partially-attributable to alcohol</a>
    </li>
    <li>
      <a href="../articles/alc_wholly_attrib_acute.html">Risk of acute conditions wholly-attributable to alcohol</a>
    </li>
    <li>
      <a href="../articles/alc_wholly_attrib_chronic.html">Risk of chronic conditions wholly-attributable to alcohol</a>
    </li>
    <li>
      <a href="../articles/smoking-disease-risks.html">Smoking disease risks</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Individual relative risks of disease</h1>
    
    <div class="hidden name"><code>RRFunc.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>This function takes a sample of individuals and computes each individual's relative risk
for each disease according to their current tobacco and alcohol consumption. 
There is an option to tailor this
to the alcohol only, tobacco only, or joint tobacco and alcohol contexts.</p>
    </div>

    <pre class="usage"><span class='fu'>RRFunc</span><span class='op'>(</span>
  <span class='va'>data</span>,
  substance <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"tob"</span>, <span class='st'>"alc"</span>, <span class='st'>"tobalc"</span><span class='op'>)</span>,
  k_year <span class='op'>=</span> <span class='cn'>NULL</span>,
  alc_diseases <span class='op'>=</span> <span class='fu'>tobalcepi</span><span class='fu'>::</span><span class='va'><a href='alc_disease_names.html'>alc_disease_names</a></span>,
  alc_mort_and_morb <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"Ischaemic_heart_disease"</span>, <span class='st'>"LiverCirrhosis"</span><span class='op'>)</span>,
  alc_risk_lags <span class='op'>=</span> <span class='cn'>TRUE</span>,
  alc_indiv_risk_trajectories_store <span class='op'>=</span> <span class='cn'>NULL</span>,
  alc_protective <span class='op'>=</span> <span class='cn'>TRUE</span>,
  alc_wholly_chronic_thresholds <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>2</span>, <span class='fl'>2</span><span class='op'>)</span>,
  alc_wholly_acute_thresholds <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>3</span>, <span class='fl'>4</span><span class='op'>)</span>,
  grams_ethanol_per_unit <span class='op'>=</span> <span class='fl'>8</span>,
  tob_diseases <span class='op'>=</span> <span class='fu'>tobalcepi</span><span class='fu'>::</span><span class='va'><a href='tob_disease_names.html'>tob_disease_names</a></span>,
  tob_include_risk_in_former_smokers <span class='op'>=</span> <span class='cn'>TRUE</span>,
  tobalc_include_int <span class='op'>=</span> <span class='cn'>FALSE</span>,
  tobalc_int_data <span class='op'>=</span> <span class='cn'>NULL</span>,
  show_progress <span class='op'>=</span> <span class='cn'>FALSE</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>data</th>
      <td><p>Data table of individual characteristics - 
this function uses current smoking and drinking status/amount.</p></td>
    </tr>
    <tr>
      <th>substance</th>
      <td><p>Whether to compute relative risks for just alcohol ("alc"),
just tobacco ("tob") or joint risks for tobacco and alcohol ("tobalc").</p></td>
    </tr>
    <tr>
      <th>k_year</th>
      <td><p>Integer giving the current year of the simulation. Defaults to NULL.</p></td>
    </tr>
    <tr>
      <th>alc_diseases</th>
      <td><p>Character vector of alcohol related diseases.</p></td>
    </tr>
    <tr>
      <th>alc_mort_and_morb</th>
      <td><p>Character vector of the names of the 
alcohol related diseases that have separate risk functions for
mortality and morbidity.</p></td>
    </tr>
    <tr>
      <th>alc_risk_lags</th>
      <td><p>Logical - should each individual's relative risks 
for alcohol be lagged according to
their past individual life-course trajectory of relative risks. 
Defaults to FALSE. 
This should only be set to TRUE for a model run that simulates individual trajectories,
and should be FALSE if this function is being used 
as part of the calculation of population attributable fractions.</p></td>
    </tr>
    <tr>
      <th>alc_indiv_risk_trajectories_store</th>
      <td><p>Data table that stores 
each individual's life-course history of relative risks for alcohol related diseases. 
This can be NULL for the first year of the simulation, and if this is the case then the 
function will initialise and return this storage data table after the first year of the simulation.</p></td>
    </tr>
    <tr>
      <th>alc_protective</th>
      <td><p>Logical - whether to include the protective effects of
alcohol in the risk function. Defaults to TRUE. If TRUE, then the part of the risk function &lt; 1 is set to equal 1.</p></td>
    </tr>
    <tr>
      <th>alc_wholly_chronic_thresholds</th>
      <td><p>Numeric vector - the thresholds in UK standard units of alcohol per day 
over which individuals begin to experience an elevated risk
 for chronic diseases that are wholly attributable to alcohol. Input in the order c(female, male). 
 Defaults to the current UK healthy drinking threshold of 14 units/week for females and males, or 2 units/day.</p></td>
    </tr>
    <tr>
      <th>alc_wholly_acute_thresholds</th>
      <td><p>Numeric vector - the thresholds in UK standard units of alcohol /day over
which individuals begin to experience an elevated risk
for acute diseases that are wholly attributable to alcohol. Input in the form c(female, male). 
Defaults to 3 units/day for females and 4 units/day for males.</p></td>
    </tr>
    <tr>
      <th>grams_ethanol_per_unit</th>
      <td><p>Numeric value giving the conversion factor for the number of grams of pure
ethanol in one UK standard unit of alcohol.</p></td>
    </tr>
    <tr>
      <th>tob_diseases</th>
      <td><p>Character vector of tobacco related diseases.</p></td>
    </tr>
    <tr>
      <th>tob_include_risk_in_former_smokers</th>
      <td><p>Logical - whether the residual risks of smoking in former smokers
should be considered (defaults to TRUE).</p></td>
    </tr>
    <tr>
      <th>tobalc_include_int</th>
      <td><p>Logical - in computing joint relative risks for tobacco and alcohol,
should a (synergistic/multiplicative) interaction between exposure to tobacco and alcohol be included.
Defaults to FALSE. If TRUE, then only interactive effects for oesophageal, pharynx, oral cavity and larynx cancers
are considered.</p></td>
    </tr>
    <tr>
      <th>tobalc_int_data</th>
      <td><p>Data table containing the disease-specific interactions between tobacco and alcohol.</p></td>
    </tr>
    <tr>
      <th>show_progress</th>
      <td><p>Logical - Should the progress of the loop through diseases be shown. Defaults to FALSE.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>Two data tables are returned:</p><ul>
<li><p>"data_plus_rr" is a version of "data" with added columns that give each
individual's relative risk for each disease.</p></li>
<li><p>"new_alc_indiv_risk_trajectories_store" is a version of "alc_indiv_risk_trajectories_store" with
the relative risks for the current year added to the store.</p></li>
</ul>

    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p><a href='https://www.tidyverse.org/lifecycle/#maturing'><img src='figures/lifecycle-maturing.svg' alt='Maturing lifecycle'></a></p>
<p>See below</p>
    <h2 class="hasAnchor" id="alcohol-risk"><a class="anchor" href="#alcohol-risk"></a>Alcohol risk</h2>

    

<p>For alcohol, the relative risk for each individual for each disease is calculated based on 
their average weekly alcohol consumption (using <code><a href='RRalc.html'>RRalc</a></code>). 
Alcohol consumption is converted to grams of ethanal consumed on average in a day, and 
this is truncated at 150g/day. We assume 8 grams of ethanol per UK standard unit of alcohol. 
 For diseases that have separate mortality and morbidity risk functions, 
 separate variables are created containing
 the relative risks for each for the same disease.
Unlike tobacco, there is no "former drinker" state in our alcohol modelling, meaning that 
individuals are not recorded as being former drinkers -- 
instead their alcohol consumption just falls to zero and their
relative risk for disease changes accordingly.</p>
    <h2 class="hasAnchor" id="alcohol-lags"><a class="anchor" href="#alcohol-lags"></a>Alcohol lags</h2>

    

<p>To account for the lagged effects of changes to the amount that individuals drink on their
current risk of disease, 
it is necessary to add memory to our modelling, 
which we do in this function by storing each individual's 
past trajectory of the relative risk that they were assigned 
for each disease. Doing so adds extra computations and makes the model run a bit slower. 
In each year of the simulation, the current relative risk of an individual is 
adjusted to take account of 
each individual's stored drinking histories. 
This adjustment takes the form of a weighted average of current and past relative risk, 
where the weights are proportional to
the disease-specific lag function (which comes from <code><a href='AlcLags.html'>AlcLags</a></code>). 
This method is slightly different to the method that was developed for SAPM, 
as it needed to be adapted to suit the modelling of individual life-course 
trajectories of alcohol consumption.</p>
    <h2 class="hasAnchor" id="tobacco-risk"><a class="anchor" href="#tobacco-risk"></a>Tobacco risk</h2>

    

<p>For tobacco, the relative risk for each individual is calculated based on whether 
they are a current, former or never smoker (using <code><a href='RRtob.html'>RRtob</a></code>).
Currently, all current smokers have the same relative risk regardless of 
the amount they currently smoke or have smoked in the past (but we are in the process 
of developing inputs and a function to take account of dose-response effects of 
the amount currently smoked using <code><a href='RRTobDR.html'>RRTobDR</a></code>).</p>
    <h2 class="hasAnchor" id="tobacco-lags"><a class="anchor" href="#tobacco-lags"></a>Tobacco lags</h2>

    

<p>Former smokers are initially given the relative risk associated with current smokers (using <code><a href='RRtob.html'>RRtob</a></code>), 
which we then scale according to a disease-specific
function that describes how risk declines after quitting smoking (which comes from <code><a href='TobLags.html'>TobLags</a></code>). 
After 40 years from quitting, we assume that risk has reached the level of a never smoker.</p>
    <h2 class="hasAnchor" id="joint-alcohol-and-tobacco-risk"><a class="anchor" href="#joint-alcohol-and-tobacco-risk"></a>Joint alcohol and tobacco risk</h2>

    

<p>If both tobacco and alcohol are being considered in a joint model,
we combine the relative risks for current drinkers and smokers. 
In implementing this combination of risks, we have built-in the option 
to take account of synergistic effects (i.e. when the combined 
risk from tobacco and alcohol consumption is more that would be expected 
from the additive combination of risks, because for some conditions that 
tobacco and alcohol consumption interact physiologically, and that interaction 
further increases disease risk). 
We currently include estimates of synergistic effects for 
oral, pharyngeal, laryngeal and oesophageal cancers. 
We apply these effects using <code><a href='TobAlcInt.html'>TobAlcInt</a></code> by scaling the joint risks by a 'synergy index', 
which takes the result of a meta-analysis of the additional
risk faced by people because they consume both tobacco and alcohol.</p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code><a href='RRalc.html'>RRalc</a></code> for alcohol-specific risks, <code><a href='RRtob.html'>RRtob</a></code> for tobacco-specific risks, 
<code><a href='AlcLags.html'>AlcLags</a></code> for alcohol-specific lag times, and <code><a href='TobLags.html'>TobLags</a></code> for tobacco-specific lag times.</p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='kw'>if</span> <span class='op'>(</span><span class='cn'>FALSE</span><span class='op'>)</span> <span class='op'>{</span>
<span class='co'>#############################</span>
<span class='co'>## ALCOHOL</span>

<span class='co'># Simulate individual data</span>

<span class='co'># Using the parameters for the Gamma distribution from Kehoe et al. 2012</span>
<span class='va'>n</span> <span class='op'>&lt;-</span> <span class='fl'>1e4</span>
<span class='va'>grams_ethanol_day</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/GammaDist.html'>rgamma</a></span><span class='op'>(</span><span class='va'>n</span>, shape <span class='op'>=</span> <span class='fl'>0.69</span>, scale <span class='op'>=</span> <span class='fl'>19.03</span><span class='op'>)</span>

<span class='co'># Note: the socioeconomic and other variables are needed for the binge model</span>

<span class='va'>data</span> <span class='op'>&lt;-</span> <span class='fu'>data.table</span><span class='op'>(</span>
  year <span class='op'>=</span> <span class='fl'>2016</span>,
  weekmean <span class='op'>=</span> <span class='va'>grams_ethanol_day</span> <span class='op'>*</span> <span class='fl'>7</span> <span class='op'>/</span> <span class='fl'>8</span>,
  <span class='co'>#peakday = 2 * grams_ethanol_day / 8,</span>
  age <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/stats/Poisson.html'>rpois</a></span><span class='op'>(</span><span class='va'>n</span>, <span class='fl'>30</span><span class='op'>)</span>,
  sex <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/sample.html'>sample</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"Male"</span>, <span class='st'>"Female"</span><span class='op'>)</span>, size <span class='op'>=</span> <span class='va'>n</span>, replace <span class='op'>=</span> <span class='cn'>T</span><span class='op'>)</span>,
  income5cat <span class='op'>=</span> <span class='st'>"1_lowest income"</span>,
  imd_quintile <span class='op'>=</span> <span class='st'>"5_most_deprived"</span>,
  kids <span class='op'>=</span> <span class='st'>"0"</span>,
  social_grade <span class='op'>=</span> <span class='st'>"C2DE"</span>,
  eduend4cat <span class='op'>=</span> <span class='st'>"16-18"</span>, <span class='co'># age finished education</span>
  ethnic2cat <span class='op'>=</span> <span class='st'>"white"</span>, <span class='co'># white / non-white</span>
  employ2cat <span class='op'>=</span> <span class='st'>"yes"</span>, <span class='co'># employed / not</span>
  wtval <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/stats/Normal.html'>rnorm</a></span><span class='op'>(</span><span class='va'>n</span>, mean <span class='op'>=</span> <span class='fl'>60</span>, sd <span class='op'>=</span> <span class='fl'>5</span><span class='op'>)</span>, <span class='co'># weight in kg</span>
  htval <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/stats/Normal.html'>rnorm</a></span><span class='op'>(</span><span class='va'>n</span>, mean <span class='op'>=</span> <span class='fl'>1.7</span>, sd <span class='op'>=</span> <span class='fl'>.1</span><span class='op'>)</span> <span class='co'># height in m</span>
<span class='op'>)</span>

<span class='co'># Add individual ids to the data</span>
<span class='va'>data</span> <span class='op'>&lt;-</span> <span class='fu'>MakeSeeds</span><span class='op'>(</span><span class='va'>data</span>, n <span class='op'>=</span> <span class='fl'>0</span><span class='op'>)</span>

<span class='co'># Disease names</span>
<span class='va'>alc_disease_names</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span>
  <span class='st'>"Pharynx"</span>,
  <span class='st'>"Ischaemic_heart_disease"</span>,
  <span class='st'>"LiverCirrhosis"</span>,
  <span class='st'>"Transport_injuries"</span>,
  <span class='st'>"Alcohol_poisoning"</span>,
  <span class='st'>"Alcoholic_gastritis"</span>
<span class='op'>)</span>

<span class='va'>test_data</span> <span class='op'>&lt;-</span> <span class='fu'>copy</span><span class='op'>(</span><span class='va'>data</span><span class='op'>)</span>

<span class='va'>test_data1</span> <span class='op'>&lt;-</span> <span class='fu'>RRFunc</span><span class='op'>(</span>
  data <span class='op'>=</span> <span class='va'>test_data</span>,
  substance <span class='op'>=</span> <span class='st'>"alc"</span>,
  k_year <span class='op'>=</span> <span class='fl'>2017</span>,
  alc_diseases <span class='op'>=</span> <span class='va'>alc_disease_names</span>,
  alc_indiv_risk_trajectories_store <span class='op'>=</span> <span class='cn'>NULL</span>,
  alc_wholly_chronic_thresholds <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>2</span>, <span class='fl'>2</span><span class='op'>)</span>,
  alc_wholly_acute_thresholds <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>3</span>, <span class='fl'>4</span><span class='op'>)</span>,
  show_progress <span class='op'>=</span> <span class='cn'>TRUE</span>
<span class='op'>)</span>

<span class='va'>test_data1</span>

<span class='va'>test_data</span> <span class='op'>&lt;-</span> <span class='fu'>copy</span><span class='op'>(</span><span class='va'>data</span><span class='op'>)</span>
<span class='va'>test_data</span><span class='op'>[</span> , <span class='va'>year</span> <span class='op'>:=</span> <span class='fl'>2017</span><span class='op'>]</span>

<span class='va'>test_data2</span> <span class='op'>&lt;-</span> <span class='fu'>RRFunc</span><span class='op'>(</span>
  data <span class='op'>=</span> <span class='va'>test_data</span>,
  substance <span class='op'>=</span> <span class='st'>"alc"</span>,
  k_year <span class='op'>=</span> <span class='fl'>2018</span>,
  alc_diseases <span class='op'>=</span> <span class='va'>alc_disease_names</span>,
  alc_indiv_risk_trajectories_store <span class='op'>=</span> <span class='va'>test_data1</span><span class='op'>$</span><span class='va'>new_alc_indiv_risk_trajectories_store</span>,
  alc_wholly_chronic_thresholds <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>2</span>, <span class='fl'>2</span><span class='op'>)</span>,
  alc_wholly_acute_thresholds <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>3</span>, <span class='fl'>4</span><span class='op'>)</span>,
  show_progress <span class='op'>=</span> <span class='cn'>TRUE</span>
<span class='op'>)</span>

<span class='va'>test_data2</span>


<span class='co'>#############################</span>
<span class='co'>## TOBACCO</span>

<span class='va'>tob_disease_names</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span>
  <span class='st'>"Pharynx"</span>,
  <span class='st'>"Chronic_obstructive_pulmonary_disease"</span>,
  <span class='st'>"Ischaemic_heart_disease"</span>,
  <span class='st'>"Lung"</span>,
  <span class='st'>"Influenza_clinically_diagnosed"</span>,
  <span class='st'>"Diabetes"</span>,
  <span class='st'>"Schizophrenia"</span>
<span class='op'>)</span>

<span class='va'>n</span> <span class='op'>&lt;-</span> <span class='fl'>1e4</span>

<span class='va'>data</span> <span class='op'>&lt;-</span> <span class='fu'>data.table</span><span class='op'>(</span>
  smk.state <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/sample.html'>sample</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"current"</span>, <span class='st'>"former"</span>, <span class='st'>"never"</span><span class='op'>)</span>, size <span class='op'>=</span> <span class='va'>n</span>, replace <span class='op'>=</span> <span class='cn'>T</span><span class='op'>)</span>,
  time_since_quit <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/sample.html'>sample</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='fl'>0</span><span class='op'>:</span><span class='fl'>40</span>, size <span class='op'>=</span> <span class='va'>n</span>, replace <span class='op'>=</span> <span class='cn'>T</span><span class='op'>)</span>,
  age <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/stats/Poisson.html'>rpois</a></span><span class='op'>(</span><span class='va'>n</span>, <span class='fl'>30</span><span class='op'>)</span>,
  sex <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/sample.html'>sample</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"Male"</span>, <span class='st'>"Female"</span><span class='op'>)</span>, size <span class='op'>=</span> <span class='va'>n</span>, replace <span class='op'>=</span> <span class='cn'>T</span><span class='op'>)</span>
<span class='op'>)</span>

<span class='va'>data</span><span class='op'>[</span><span class='va'>smk.state</span> <span class='op'>!=</span> <span class='st'>"former"</span>, <span class='va'>time_since_quit</span> <span class='op'>:=</span> <span class='cn'>NA</span><span class='op'>]</span>

<span class='co'># Tobacco relative risks for Pharygeal cancer</span>
<span class='fu'>RRFunc</span><span class='op'>(</span>
  data <span class='op'>=</span> <span class='va'>data</span>,
  substance <span class='op'>=</span> <span class='st'>"tob"</span>,
  tob_diseases <span class='op'>=</span> <span class='va'>tob_disease_names</span>,
  show_progress <span class='op'>=</span> <span class='cn'>TRUE</span>
<span class='op'>)</span>


<span class='co'>#############################</span>
<span class='co'>## TOBACCO AND ALCOHOL</span>

<span class='op'>}</span>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by <a href='https://www.sheffield.ac.uk/scharr/sections/heds/staff/gillespie_d'>Duncan Gillespie</a>, Laura Webster, <a href='https://www.sheffield.ac.uk/scharr/sections/heds/staff/henney_m'>Maddy Henney</a>, <a href='https://www.sheffield.ac.uk/scharr/sections/heds/staff/angus_c'>Colin Angus</a>, <a href='https://www.sheffield.ac.uk/scharr/sections/heds/staff/brennan_a'>Alan Brennan</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


