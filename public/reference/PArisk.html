<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Relative risks for alcohol-related injuries  — PArisk • tobalcepi</title>

<!-- favicons -->
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png" />
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png" />

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Relative risks for alcohol-related injuries  — PArisk" />
<meta property="og:description" content="Uses the 'new' binge model methods to calculate a relative risk
for each individual for experiencing each cause during one year." />
<meta property="og:image" content="https://stapm.gitlab.io/r-packages/tobalcepi/logo.png" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-167990045-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-167990045-1');
</script>


  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">tobalcepi</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.4.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../articles/tobalcepi.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Functions</a>
</li>
<li>
  <a href="../articles/index.html">Technical documentation</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://gitlab.com/stapm/r-packages/tobalcepi">
    <span class="fab fa fab fa-gitlab fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="https://stapm.gitlab.io/software.html">
    <span class="fa fa-code"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Relative risks for alcohol-related injuries <a href='https://www.tidyverse.org/lifecycle/#stable'><img src='figures/lifecycle-stable.svg' alt='Stable lifecycle'></a></h1>
    
    <div class="hidden name"><code>PArisk.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Uses the 'new' binge model methods to calculate a relative risk
for each individual for experiencing each cause during one year.</p>
    </div>

    <pre class="usage"><span class='fu'>PArisk</span><span class='op'>(</span>
  SODMean <span class='op'>=</span> <span class='cn'>NULL</span>,
  SODSDV <span class='op'>=</span> <span class='cn'>NULL</span>,
  SODFreq <span class='op'>=</span> <span class='cn'>NULL</span>,
  Weight <span class='op'>=</span> <span class='cn'>NULL</span>,
  Widmark_r <span class='op'>=</span> <span class='cn'>NULL</span>,
  cause <span class='op'>=</span> <span class='st'>"Transport"</span>,
  grams_ethanol <span class='op'>=</span> <span class='fl'>1</span><span class='op'>:</span><span class='fl'>100</span>,
  grams_ethanol_per_unit <span class='op'>=</span> <span class='fl'>8</span>,
  grams_ethanol_per_std_drink <span class='op'>=</span> <span class='fl'>12.8</span>,
  liver_clearance_rate_h <span class='op'>=</span> <span class='fl'>0.017</span>,
  getcurve <span class='op'>=</span> <span class='cn'>FALSE</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>SODMean</th>
      <td><p>Numeric vector - the average amount that each individual is expected to
drink on a single drinking occassion.</p></td>
    </tr>
    <tr>
      <th>SODSDV</th>
      <td><p>Numeric vector - the standard deviation of the amount that each individual is expected to
drink on a single drinking occassion.</p></td>
    </tr>
    <tr>
      <th>SODFreq</th>
      <td><p>Numeric vector - the expected number of drinking occassions that
each individual has each week.</p></td>
    </tr>
    <tr>
      <th>Weight</th>
      <td><p>Numeric vector - each individual's body weight in kg.</p></td>
    </tr>
    <tr>
      <th>Widmark_r</th>
      <td><p>Numeric vector - the fraction of the body mass in which alcohol would be present
if it were distributed at concentrations equal to that in blood.
See examples of use of the Widmark equation in Watson (1981) and Posey and Mozayani (2007).</p></td>
    </tr>
    <tr>
      <th>cause</th>
      <td><p>Character - the acute cause being considered.</p></td>
    </tr>
    <tr>
      <th>grams_ethanol</th>
      <td><p>Numeric vector - the range of grams of ethanol over which to compute relative risk. 
Defaults to 1:100.</p></td>
    </tr>
    <tr>
      <th>grams_ethanol_per_unit</th>
      <td><p>Numeric value giving the conversion factor for the number of grams of pure
ethanol in one UK standard unit of alcohol.</p></td>
    </tr>
    <tr>
      <th>grams_ethanol_per_std_drink</th>
      <td><p>Numeric value giving the conversion factor for
the number of grams of ethanol in one standard drink.</p></td>
    </tr>
    <tr>
      <th>liver_clearance_rate_h</th>
      <td><p>The rate at which blood alcohol concentration declines (percent / hour).</p></td>
    </tr>
    <tr>
      <th>getcurve</th>
      <td><p>Logical - do you just want to look at the risk function curve?</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>Returns a numeric vector of each individual's relative risk of the acute consequences of drinking.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>This calculation treats an ocassion as a single point in time and therefore does not detail
about the rate of alcohol absorbtion (i.e. there is no alcohol absorbtion rate constant)
or the time interval between drinks within an occassion. This could introduce inaccuracies if
 e.g. a drinking occassion lasted several hours. The methods to calculate the total time spent intoxicated
 (with blood alcohol content greater than zero) are discussed in Taylor et al 2011
 and the discussion paper by Hill-McManus 2014. The relative risks for alcohol-related injuries
 are taken from Cherpitel et al 2015.</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'>
<span class='kw'>if</span> <span class='op'>(</span><span class='cn'>FALSE</span><span class='op'>)</span> <span class='op'>{</span>

<span class='co'>## Further explanation</span>
 
<span class='co'># For a male with the following characteristics:</span>
<span class='va'>Weight</span> <span class='op'>&lt;-</span> <span class='fl'>70</span> <span class='co'># weight in kg</span>
<span class='va'>Height</span> <span class='op'>&lt;-</span> <span class='fl'>2</span> <span class='co'># height in m</span>
<span class='va'>Age</span> <span class='op'>&lt;-</span> <span class='fl'>25</span> <span class='co'># age in years</span>

<span class='co'># We can estimate their r value from the Widmark equation </span>
<span class='co'># using parameter values from Posey and Mozayani (2007)</span>
<span class='va'>Widmark_r</span> <span class='op'>&lt;-</span> <span class='fl'>0.39834</span> <span class='op'>+</span> <span class='op'>(</span><span class='op'>(</span><span class='fl'>12.725</span> <span class='op'>*</span> <span class='va'>Height</span> <span class='op'>-</span> <span class='fl'>0.11275</span> <span class='op'>*</span> <span class='va'>Age</span> <span class='op'>+</span> <span class='fl'>2.8993</span><span class='op'>)</span> <span class='op'>/</span> <span class='va'>Weight</span><span class='op'>)</span>

<span class='co'># They might drink from 1 to 100 grams of ethanol on one occassion</span>
<span class='va'>grams_ethanol</span> <span class='op'>&lt;-</span> <span class='fl'>1</span><span class='op'>:</span><span class='fl'>100</span>

<span class='co'># In minutes, We would expect them to remain intoxicated </span>
<span class='co'># (with blood alcohol content &gt; 0 percent) for</span>
<span class='va'>Duration_m</span> <span class='op'>&lt;-</span> <span class='fl'>100</span> <span class='op'>*</span> <span class='va'>grams_ethanol</span> <span class='op'>/</span> <span class='op'>(</span><span class='va'>Widmark_r</span> <span class='op'>*</span> <span class='va'>Weight</span> <span class='op'>*</span> <span class='fl'>1000</span> <span class='op'>*</span> <span class='op'>(</span><span class='va'>liver_clearance_rate_h</span> <span class='op'>/</span> <span class='fl'>60</span><span class='op'>)</span><span class='op'>)</span>

<span class='co'># and hours</span>
<span class='va'>Duration_h</span> <span class='op'>&lt;-</span> <span class='va'>Duration_m</span> <span class='op'>/</span> <span class='fl'>60</span>

<span class='co'># Duration is the length of time taken to clear all alcohol from the blood</span>
<span class='co'># so we don't apply any thresholds of intoxication,</span>
<span class='co'># we just calculate the expected length of time with a bac greater than 0.</span>

<span class='co'># Now suppose that on average our example male has 5 drinking occasions per week, and that</span>
<span class='co'># on average they drink 3 units of alcohol on an occasion,</span>
<span class='co'># and that the standard deviation of amount drunk on an occasion is 14 units.</span>

<span class='co'># The cumulative probability distribution of each amount of alcohol being drunk on an occassion is</span>
<span class='va'>x</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/Normal.html'>pnorm</a></span><span class='op'>(</span><span class='va'>grams_ethanol</span>, <span class='fl'>2</span> <span class='op'>*</span> <span class='fl'>8</span>, <span class='fl'>14</span> <span class='op'>*</span> <span class='fl'>8</span><span class='op'>)</span>

<span class='co'># Convert from the cumulative distribution to the</span>
<span class='co'># probability that each level of alcohol is consumed on a drinking occasion</span>
<span class='va'>interval_prob</span> <span class='op'>&lt;-</span> <span class='va'>x</span> <span class='op'>-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0</span>, <span class='va'>x</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>:</span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/length.html'>length</a></span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span> <span class='op'>-</span> <span class='fl'>1</span><span class='op'>)</span><span class='op'>]</span><span class='op'>)</span>

<span class='co'># The probability-weighted distribution of time spent intoxicated during a year (52 weeks) is</span>
<span class='va'>Time_intox</span> <span class='op'>&lt;-</span> <span class='fl'>5</span> <span class='op'>*</span> <span class='fl'>52</span> <span class='op'>*</span> <span class='va'>interval_prob</span> <span class='op'>*</span> <span class='va'>Duration_h</span>

<span class='co'># And the expected total time spent intoxicated is</span>
<span class='va'>Time_intox_sum</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/sum.html'>sum</a></span><span class='op'>(</span><span class='va'>Time_intox</span><span class='op'>)</span>

<span class='co'># The relative risk of a transport injury corresponding to each amount drunk on a single occasion</span>
<span class='co'># corresponds to the number of standard drinks consumed</span>

<span class='co'># We convert to standard drinking and apply the risk parameters from Cherpitel</span>

<span class='va'>v</span> <span class='op'>&lt;-</span> <span class='va'>grams_ethanol</span> <span class='op'>/</span> <span class='fl'>12.8</span>
<span class='va'>v1</span> <span class='op'>&lt;-</span> <span class='op'>(</span><span class='va'>v</span> <span class='op'>+</span> <span class='fl'>1</span><span class='op'>)</span> <span class='op'>/</span> <span class='fl'>100</span>

<span class='co'># Parameters from Cherpitel</span>
<span class='va'>b1</span> <span class='op'>&lt;-</span> <span class='fl'>3.973538882</span>
<span class='va'>b2</span> <span class='op'>&lt;-</span> <span class='fl'>6.65184e-6</span>
<span class='va'>b3</span> <span class='op'>&lt;-</span> <span class='fl'>0.837637</span>
<span class='va'>b4</span> <span class='op'>&lt;-</span> <span class='fl'>1.018824</span>

<span class='co'># Apply formula for the risk curve from Cherpital</span>
<span class='va'>lvold_1</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/Log.html'>log</a></span><span class='op'>(</span><span class='va'>v1</span><span class='op'>)</span> <span class='op'>+</span> <span class='va'>b1</span>
<span class='va'>lvold_2</span> <span class='op'>&lt;-</span> <span class='op'>(</span><span class='va'>v1</span><span class='op'>^</span><span class='fl'>3</span><span class='op'>)</span> <span class='op'>-</span> <span class='va'>b2</span>
<span class='va'>logitp</span> <span class='op'>&lt;-</span> <span class='va'>lvold_1</span> <span class='op'>*</span> <span class='va'>b3</span> <span class='op'>+</span> <span class='va'>lvold_2</span> <span class='op'>*</span> <span class='va'>b4</span>
<span class='va'>p</span> <span class='op'>&lt;-</span> <span class='fu'>boot</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/pkg/boot/man/inv.logit.html'>inv.logit</a></span><span class='op'>(</span><span class='va'>logitp</span><span class='op'>)</span>

<span class='co'># The relative risk associated with each amount drunk on an occasion</span>
<span class='va'>rr</span> <span class='op'>&lt;-</span> <span class='va'>p</span> <span class='op'>/</span> <span class='va'>p</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>]</span>

<span class='co'># The relative risk multiplied by the time exposed to that level of risk</span>
<span class='va'>Current_risk</span> <span class='op'>&lt;-</span> <span class='va'>rr</span> <span class='op'>*</span> <span class='va'>Time_intox</span>

<span class='co'># The sum of the relative risk associated with the time spent intoxicated during one year</span>
<span class='va'>Risk_sum</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/sum.html'>sum</a></span><span class='op'>(</span><span class='va'>Current_risk</span><span class='op'>)</span>

<span class='co'># The average annual relative risk, considering that time in the year spent with a</span>
<span class='co'># blood alcohol content of zero has a relative risk of 1.</span>
<span class='va'>Annual_risk</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/Extremes.html'>min</a></span><span class='op'>(</span>
  <span class='op'>(</span><span class='va'>Risk_sum</span> <span class='op'>+</span> <span class='fl'>1</span> <span class='op'>*</span> <span class='op'>(</span><span class='fl'>365</span> <span class='op'>*</span> <span class='fl'>24</span> <span class='op'>-</span> <span class='va'>Time_intox_sum</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>/</span> <span class='op'>(</span><span class='fl'>365</span> <span class='op'>*</span> <span class='fl'>24</span><span class='op'>)</span>,
  <span class='fl'>365</span> <span class='op'>*</span> <span class='fl'>24</span>, na.rm <span class='op'>=</span> <span class='cn'>T</span><span class='op'>)</span>



<span class='co'># THE FOLLOWING ARE NOT CONSIDERED IN THIS CALCULATION</span>

<span class='co'># Elapsed time in minutes since consuming alcohol</span>
<span class='va'>t</span> <span class='op'>&lt;-</span> <span class='fl'>30</span>

<span class='co'># Alcohol absorbtion rate constant</span>
<span class='va'>k_empty_stomach</span> <span class='op'>&lt;-</span> <span class='fl'>6.5</span> <span class='op'>/</span> <span class='fl'>60</span> <span class='co'># grams of ethanol per minute</span>

<span class='co'># Alcohol absorbtion</span>
<span class='va'>alcohol_absorbed</span> <span class='op'>&lt;-</span> <span class='va'>grams_ethanol</span> <span class='op'>*</span> <span class='op'>(</span><span class='fl'>1</span> <span class='op'>-</span> <span class='fu'><a href='https://rdrr.io/r/base/Log.html'>exp</a></span><span class='op'>(</span><span class='op'>-</span><span class='va'>k_empty_stomach</span> <span class='op'>*</span> <span class='va'>t</span><span class='op'>)</span><span class='op'>)</span>

<span class='co'># Calculate blood alcohol content using the Widemark eqn</span>
<span class='va'>bac</span> <span class='op'>&lt;-</span> <span class='op'>(</span><span class='fl'>100</span> <span class='op'>*</span> <span class='va'>alcohol_absorbed</span> <span class='op'>/</span> <span class='op'>(</span><span class='va'>Widmark_r</span> <span class='op'>*</span> <span class='va'>Weight</span> <span class='op'>*</span> <span class='fl'>1000</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>-</span> <span class='op'>(</span><span class='op'>(</span><span class='va'>liver_clearance_rate_h</span> <span class='op'>/</span> <span class='fl'>60</span><span class='op'>)</span> <span class='op'>*</span> <span class='va'>t</span><span class='op'>)</span>
<span class='op'>}</span>

</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by <a href='https://www.sheffield.ac.uk/scharr/sections/heds/staff/gillespie_d'>Duncan Gillespie</a>, Laura Webster, <a href='https://www.sheffield.ac.uk/scharr/sections/heds/staff/henney_m'>Maddy Henney</a>, <a href='https://www.sheffield.ac.uk/scharr/sections/heds/staff/angus_c'>Colin Angus</a>, <a href='https://www.sheffield.ac.uk/scharr/sections/heds/staff/brennan_a'>Alan Brennan</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


