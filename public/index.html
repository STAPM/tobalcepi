<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Risk Functions and Attributable Fractions for Tobacco and Alcohol • tobalcepi</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Risk Functions and Attributable Fractions for Tobacco and Alcohol">
<meta property="og:description" content="Functions to assign relative risks of disease to individuals based on their tobacco and/or alcohol consumption, and to estimate the attributable fractions of disease.">
<meta property="og:image" content="https://stapm.gitlab.io/r-packages/tobalcepi/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-167990045-1"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-167990045-1');
</script>
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">tobalcepi</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.4.5</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="articles/tobalcepi.html">Get started</a>
</li>
<li>
  <a href="reference/index.html">Functions</a>
</li>
<li>
  <a href="articles/index.html">Technical documentation</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://gitlab.com/stapm/r-packages/tobalcepi">
    <span class="fab fa fab fa-gitlab fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="https://stapm.gitlab.io/software.html">
    <span class="fa fa-code"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">
<div id="risk-functions-and-attributable-fractions-for-tobacco-and-alcohol-" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#risk-functions-and-attributable-fractions-for-tobacco-and-alcohol-" class="anchor"></a>Risk Functions and Attributable Fractions for Tobacco and Alcohol <img src="logo.png" align="right" style="padding-left:10px;background-color:white;" width="100" height="100">
</h1></div>
<!-- badges: start -->

<div id="motivation" class="section level2">
<h2 class="hasAnchor">
<a href="#motivation" class="anchor"></a>Motivation</h2>
<p>The motivation for <code>tobalcepi</code> was to organise how we store, process and use the information on the risks of disease that stem from tobacco and/or alcohol consumption, including to provide functions to easily use these risk estimates in modelling.</p>
<p><code>tobalcepi</code> was created as part of a programme of work on the health economics of tobacco and alcohol at the School of Health and Related Research (ScHARR), The University of Sheffield. This programme is based around the development of the Sheffield Tobacco and Alcohol Policy Modelling (STAPM), which aims to use comparable methodologies to evaluate the impacts of tobacco and alcohol policies, and investigate the consequences of clustering and interactions between tobacco and alcohol consumption behaviours.</p>
</div>
<div id="relative-risk-data" class="section level2">
<h2 class="hasAnchor">
<a href="#relative-risk-data" class="anchor"></a>Relative risk data</h2>
<p>The disease lists and risk functions in this package all have published sources, which we have referenced (Angus et al. <a href="#ref-Angus2018">2018</a>; Webster et al. <a href="#ref-webster2018risk">2018</a>). We have written some working <a href="https://stapm.gitlab.io/r-packages/tobalcepi/articles/index.html">technical descriptions</a> to explain how these risk functions are implemented in STAPM. We store the master files for our tobacco and alcohol disease lists and risk functions sources in the University of Sheffield folder <code>X:/ScHARR/PR_Disease_Risk_TA/Code/tables</code>. In order to obtain mathematical descriptions of the risk functions for use in modelling, we needed to contact some authors to ask for additional information.</p>
<div id="alcohol" class="section level3">
<h3 class="hasAnchor">
<a href="#alcohol" class="anchor"></a>Alcohol</h3>
<p>The high-level function for alcohol is <code><a href="reference/RRalc.html">tobalcepi::RRalc()</a></code>, which calculates individual risks of diseases as follows:</p>
<ol>
<li>
<strong>Alcohol - partially-attributable chronic conditions</strong>: dose-response effects of current alcohol consumption on disease risk (Angus et al. <a href="#ref-Angus2018">2018</a>) are hard-coded into the function <code><a href="reference/RRalc.html">tobalcepi::RRalc()</a></code>. Updates to these risk functions must therefore be made by changing the function code.<br>
</li>
<li>
<strong>Alcohol - partially-attributable acute conditions</strong>: dose-response effects of single-occasion alcohol consumption are hard coded into the function <code><a href="reference/PArisk.html">tobalcepi::PArisk()</a></code>, which is called by <code><a href="reference/RRalc.html">tobalcepi::RRalc()</a></code>.<br>
</li>
<li>
<strong>Alcohol - wholly-attributable acute conditions</strong>: these are not based on published risk functions but are based on thresholds, in UK standard units of alcohol drunk on a single occasion, over which individuals begin to experience an elevated risk for acute diseases that are wholly attributable to alcohol. This is applied by the function <code><a href="reference/WArisk_acute.html">tobalcepi::WArisk_acute()</a></code>, which is called by <code><a href="reference/RRalc.html">tobalcepi::RRalc()</a></code>.<br>
</li>
<li>
<strong>Alcohol - wholly-attributable chronic conditions</strong>: these are also based on thresholds in UK standard units of alcohol drunk on average in a week, over which individuals begin to experience an elevated risk for chronic diseases that are wholly attributable to alcohol. This is applied by code within the function <code><a href="reference/RRalc.html">tobalcepi::RRalc()</a></code>.</li>
</ol>
</div>
<div id="tobacco" class="section level3">
<h3 class="hasAnchor">
<a href="#tobacco" class="anchor"></a>Tobacco</h3>
<ol>
<li>
<code><a href="reference/RRtob.html">tobalcepi::RRtob()</a></code> takes a lookup table of the risks associated with current vs. never smoking and assigns these to individuals based on their smoking state, age and sex (Webster et al. <a href="#ref-webster2018risk">2018</a>).<br>
</li>
<li>We are in the process of developing the function <code><a href="reference/RRTobDR.html">tobalcepi::RRTobDR()</a></code> to stratify the risks of some cancers according to the amount smoked per day by current smokers. There is limited info on these dose-response effects, so we are gradually building up the epidemiological detail in this area as we review, critically appraise and integrate new risk data into our modelling.</li>
</ol>
</div>
<div id="lag-times" class="section level3">
<h3 class="hasAnchor">
<a href="#lag-times" class="anchor"></a>Lag times</h3>
<p>Lag times are the information on the delay between a change to tobacco or alcohol consumption and the decline in the risk of disease associated with that consumption. The relevant functions are <code><a href="reference/TobLags.html">tobalcepi::TobLags()</a></code> (which uses lags stored in <code><a href="reference/tobacco_lag_times.html">tobalcepi::tobacco_lag_times</a></code>) and <code><a href="reference/AlcLags.html">tobalcepi::AlcLags()</a></code> (which contains lags hard-coded into the function).</p>
</div>
<div id="tobacco---alcohol-risk-interactions" class="section level3">
<h3 class="hasAnchor">
<a href="#tobacco---alcohol-risk-interactions" class="anchor"></a>Tobacco - Alcohol risk interactions</h3>
<p>We use estimates of potential tobacco - alcohol risk interactions for:</p>
<ul>
<li>Oral cavity cancer<br>
</li>
<li>Pharyngeal cancer<br>
</li>
<li>Laryngeal cancer<br>
</li>
<li>Oesophageal SCC cancer</li>
</ul>
<p>These estimates are stored in <code><a href="reference/tob_alc_risk_int.html">tobalcepi::tob_alc_risk_int</a></code>.</p>
</div>
</div>
<div id="package-data" class="section level2">
<h2 class="hasAnchor">
<a href="#package-data" class="anchor"></a>Package data</h2>
<p>Some useful, not risk-bearing, data is stored within the package and is installed onto your computer when you download and load the package. We use package data for data that is likely to be used across several projects, that it is important to keep standardised across projects, and is only likely to need updating after a long interval e.g. at least annually.</p>
<p>The types of data included in tobalcepi are:</p>
<ul>
<li>Lists of the names of the diseases that are related to tobacco and/or alcohol.<br>
</li>
<li>Parameters used in the modelling of single occasion drinking.<br>
</li>
<li>Tobacco relative risks of current vs. never smokers.</li>
<li>Tobacco lag times.<br>
</li>
<li>Tobacco - alcohol risk interactions.</li>
</ul>
<p>When these data need to be updated, the inputs and code in the package folder <code>data-raw</code> will need to be changed, and the package rebuild with a new version.</p>
</div>
<div id="usage" class="section level2">
<h2 class="hasAnchor">
<a href="#usage" class="anchor"></a>Usage</h2>
<p><code>tobalcepi</code> is a package for predicting individual risk of disease due to tobacco and alcohol consumption based on published sources, and summarising that risk. The suite of functions within <code>tobalcepi</code> processes the published data on the relative risks of disease that stem from chronic and acute alcohol consumption, from smoking, and on the decline in risk after ceasing or reducing consumption. The package also includes functions to estimate population attributable fractions, and to explore the interaction between the disease risks that stem from tobacco and alcohol consumption.</p>
<p>The <strong>inputs</strong> are the published estimates of relative risk for each disease (sometimes stratified by population subgroup).</p>
<p>The <strong>processes</strong> applied by the functions in <code>tobalcepi</code> give options to estimate:</p>
<ol>
<li>The risk of injury or disease from acute alcohol consumption.<br>
</li>
<li>The risk of chronic disease based on the current amount of alcohol consumed.<br>
</li>
<li>The risk of chronic disease based on whether someone currently smokes, and how much they currently smoke.<br>
</li>
<li>The combined risk of disease in someone who smokes and drinks.<br>
</li>
<li>The change in risk of disease after someone ceases or reduces their consumption.<br>
</li>
<li>The population attributable fractions of disease to tobacco and/or alcohol (given suitable data on tobacco and alcohol consumption).</li>
</ol>
<p>The <strong>outputs</strong> of these processes are datasets in which an individual’s tobacco and/or alcohol consumption has been matched to their relative risks of certain diseases, and aggregated datasets that summarise the risks of disease within certain population subgroups.</p>
</div>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<p><code>tobalcepi</code> is currently available only to members of the project team (but please contact Duncan Gillespie <a href="mailto:duncan.gillespie@sheffield.ac.uk" class="email">duncan.gillespie@sheffield.ac.uk</a> to discuss). To access you need to <a href="https://gitlab.com/">sign-up for a GitLab account</a>. You will then need to be added to the STAPM project team to gain access.</p>
<p>Once that is sorted, you can install the latest or a specified version from GitLab with:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">#install.packages("devtools")</span>
<span class="co">#install.packages("getPass")</span>

<span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://devtools.r-lib.org//reference/remote-reexports.html">install_git</a></span><span class="op">(</span>
  <span class="st">"https://gitlab.com/stapm/r-packages/tobalcepi.git"</span>, 
  credentials <span class="op">=</span> <span class="fu">git2r</span><span class="fu">::</span><span class="fu"><a href="https://docs.ropensci.org/git2r/reference/cred_user_pass.html">cred_user_pass</a></span><span class="op">(</span><span class="st">"uname"</span>, <span class="fu">getPass</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/getPass/man/getPass.html">getPass</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span>,
  ref <span class="op">=</span> <span class="st">"x.x.x"</span>,
  build_vignettes <span class="op">=</span> <span class="cn">TRUE</span>
<span class="op">)</span>

<span class="co"># Where uname is your Gitlab user name.</span>
<span class="co"># ref = "x.x.x" is the version to install - remove this to install the latest version</span>
<span class="co"># this should make a box pop up where you enter your GitLab password</span></code></pre></div>
<p>Then load the package, and some other packages that are useful. Note that the code within <code>tobalcepi</code> uses the <code><a href="https://Rdatatable.gitlab.io/data.table/reference/data.table.html">data.table::data.table()</a></code> syntax.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Load the package</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://stapm.gitlab.io/r-packages/tobalcepi/">tobalcepi</a></span><span class="op">)</span>

<span class="co"># Other useful packages</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org">dplyr</a></span><span class="op">)</span> <span class="co"># for data manipulation and summary</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://magrittr.tidyverse.org">magrittr</a></span><span class="op">)</span> <span class="co"># for pipes</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="http://ggplot2.tidyverse.org">ggplot2</a></span><span class="op">)</span> <span class="co"># for plotting</span></code></pre></div>
</div>
<div id="citation" class="section level2">
<h2 class="hasAnchor">
<a href="#citation" class="anchor"></a>Citation</h2>
<p>Please cite the latest version of the package using:<br>
“Duncan Gillespie, Laura Webster, Maddy Henney, Colin Angus and Alan Brennan (2020). tobalcepi: Risk Functions and Attributable Fractions for Tobacco and Alcohol. R package version x.x.x. <a href="https://stapm.gitlab.io/r-packages/tobalcepi" class="uri">https://stapm.gitlab.io/r-packages/tobalcepi</a>”</p>
</div>
<div id="references" class="section level2">
<h2 class="hasAnchor">
<a href="#references" class="anchor"></a>References</h2>
<div id="refs" class="references hanging-indent">
<div id="ref-Angus2018">
<p>Angus, Colin, M Henney, L Webster, and Duncan Gillespie. 2018. “Alcohol-Attributable Diseases and Dose-Response Curves for the Sheffield Alcohol Policy Model Version 4.0.” The University of Sheffield. <a href="https://doi.org/10.15131/shef.data.6819689.v2" class="uri">https://doi.org/10.15131/shef.data.6819689.v2</a>.</p>
</div>
<div id="ref-webster2018risk">
<p>Webster, Laura, Colin Angus, Alan Brennan, and Duncan Gillespie. 2018. “Smoking and the Risks of Adult Diseases.” The University of Sheffield. <a href="https://doi.org/10.15131/shef.data.7411451.v1" class="uri">https://doi.org/10.15131/shef.data.7411451.v1</a>.</p>
</div>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></small></li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>
<a href="https://www.sheffield.ac.uk/scharr/sections/heds/staff/gillespie_d">Duncan Gillespie</a> <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0003-3450-5747" target="orcid.widget" aria-label="ORCID"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li>Laura Webster <br><small class="roles"> Author </small>  </li>
<li>
<a href="https://www.sheffield.ac.uk/scharr/sections/heds/staff/henney_m">Maddy Henney</a> <br><small class="roles"> Author </small>  </li>
<li>
<a href="https://www.sheffield.ac.uk/scharr/sections/heds/staff/angus_c">Colin Angus</a> <br><small class="roles"> Author </small>  </li>
<li>
<a href="https://www.sheffield.ac.uk/scharr/sections/heds/staff/brennan_a">Alan Brennan</a> <br><small class="roles"> Author </small>  </li>
</ul>
</div>

  <div class="dev-status">
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://www.tidyverse.org/lifecycle/#maturing"><img src="https://img.shields.io/badge/lifecycle-maturing-blue.svg" alt="Lifecycle: maturing"></a></li>
<li><a href="https://www.repostatus.org/#active"><img src="https://www.repostatus.org/badges/latest/active.svg" alt="Project Status: Active – The project has reached a stable, usable state and is being actively developed."></a></li>
</ul>
</div>
</div>
</div>


      <footer><div class="copyright">
  <p>Developed by <a href="https://www.sheffield.ac.uk/scharr/sections/heds/staff/gillespie_d">Duncan Gillespie</a>, Laura Webster, <a href="https://www.sheffield.ac.uk/scharr/sections/heds/staff/henney_m">Maddy Henney</a>, <a href="https://www.sheffield.ac.uk/scharr/sections/heds/staff/angus_c">Colin Angus</a>, <a href="https://www.sheffield.ac.uk/scharr/sections/heds/staff/brennan_a">Alan Brennan</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
